# Cursor Dev Context — MVP 개발 계획

> Cursor 채팅 히스토리를 시각화하고, 과거 작업 맥락을 이어갈 수 있게 해주는 개발자용 도구

---

## 프로젝트 개요

### 핵심 가치
"3주 전에 했던 Electron 최적화 작업, 어디까지 했더라?" → 찾고, 보고, 이어가기

### 타겟 사용자
- Cursor를 주력으로 쓰는 개발자
- 여러 프로젝트를 병행하며, 간헐적으로 특정 주제를 이어가는 사람

### 기술 스택
| 영역 | 선택 | 이유 |
|------|------|------|
| 프론트엔드 | SvelteKit | 가볍고, 토이 프로젝트에 적합. 이전에 검토한 경험 있음 |
| 시각화 | D3.js 또는 Layercake (Svelte 네이티브) | 히트맵, 타임라인 구현 유연성 |
| 데이터 파싱 | Node.js (TypeScript) | cursor-history 라이브러리 활용 가능 |
| 요약/태깅 | LLM API (Claude 또는 로컬 모델) | 세션 요약 및 토픽 태깅 |
| 저장소 | SQLite (로컬) | 인덱싱된 데이터 캐싱. 서버 불필요 |
| 임베딩 (향후) | Transformers.js 또는 API | 시맨틱 검색 및 클러스터링용 |

---

## 마일스톤 구성

### Phase 0 — 데이터 탐색 (1~2일)
> Cursor의 state.vscdb 구조를 직접 파악하고, 어떤 데이터가 쓸 만한지 확인

- [ ] cursor-history 라이브러리 설치 및 로컬 데이터 파싱 테스트
- [ ] 세션별 데이터 구조 정리: 타임스탬프, 메시지 수, 워크스페이스, 파일 읽기/쓰기 내역
- [ ] 본인의 실제 Cursor 데이터로 JSON 덤프 → 데이터 품질 확인
- [ ] 세션 수, 평균 길이, 워크스페이스 분포 등 기초 통계 파악

**산출물**: 데이터 구조 정리 문서 + 샘플 JSON

---

### Phase 1 — 세션 목록 + 검색 (3~5일)
> 최소한의 UI로 "과거 세션을 찾을 수 있는" 상태 만들기

- [ ] SvelteKit 프로젝트 초기 설정
- [ ] state.vscdb 파싱 모듈 (cursor-history 래핑 또는 직접 SQLite 읽기)
- [ ] 세션 목록 페이지
  - 시간순 정렬
  - 워크스페이스별 필터
  - 각 세션 카드: 날짜, 워크스페이스명, 메시지 수, 첫 메시지 미리보기
- [ ] 키워드 검색 (세션 내 텍스트 풀텍스트 검색)
- [ ] 세션 상세 보기: 전체 대화 내용 렌더링

**산출물**: 로컬에서 동작하는 웹앱. Cursor 히스토리를 검색/탐색 가능

---

### Phase 2 — 자동 요약 + 토픽 태깅 (3~5일)
> 각 세션에 "한 줄 요약"과 "토픽 태그"를 자동으로 붙이기

- [ ] LLM 기반 세션 요약 파이프라인
  - 입력: 세션의 첫 3~5턴 (토큰 절약)
  - 출력: 한 줄 요약 + 토픽 태그 2~3개
  - 예시: "Electron에서 ARM CPU 렌더링 지연 디버깅" [electron, performance, arm]
- [ ] 요약 결과 로컬 SQLite에 캐싱 (재계산 방지)
- [ ] 세션 카드에 요약 + 태그 표시
- [ ] 토픽 태그 기반 필터링
- [ ] (선택) 배치 처리: 전체 히스토리 한 번에 요약

**고려사항**:
- API 비용 최소화: 전체 대화가 아닌 앞부분만 사용
- 오프라인 옵션: Ollama 로컬 모델 지원 가능성 열어두기
- 태그 일관성: 프롬프트에서 기존 태그 목록 참조하도록

**산출물**: 모든 세션에 요약과 태그가 붙은 상태. 태그 필터로 탐색 가능

---

### Phase 3 — 시각화 (3~5일)
> 타임라인 + 히트맵으로 작업 패턴을 한눈에 파악

#### 3-1. 히트맵 캘린더 (상단)
- [ ] GitHub 잔디밭 스타일 캘린더
- [ ] 각 날짜 셀: 세션 수에 따른 농도
- [ ] 마우스 오버: 해당 날짜의 세션 수 + 주요 토픽
- [ ] 클릭: 해당 날짜 세션 목록으로 스크롤/필터

#### 3-2. 타임라인 + 요약 카드 (메인)
- [ ] 세로 타임라인 UI
- [ ] 각 세션 카드: 날짜, 요약, 태그, 워크스페이스, 관련 파일 목록
- [ ] 토픽 태그별 색상 구분
- [ ] 같은 토픽의 세션끼리 시각적 연결선 (선택)

**산출물**: 대시보드 형태의 메인 화면. 패턴 파악 + 세션 탐색 가능

---

### Phase 4 — 컨텍스트 이어가기 (3~5일)
> 핵심 기능. 과거 세션을 선택하면 이어갈 수 있는 컨텍스트를 자동 생성

- [ ] 세션 선택 기능 (체크박스 또는 다중 클릭)
- [ ] "컨텍스트 생성" 버튼
  - 선택된 세션들을 LLM에 보내서 압축 요약 생성
  - 출력 구조:
    ```markdown
    ## 이전 작업 컨텍스트

    ### 작업 배경
    - [프로젝트/기능 설명]

    ### 이전에 시도한 것
    - [접근 방식 1]: [결과]
    - [접근 방식 2]: [결과]

    ### 결정된 사항
    - [아키텍처 결정, 라이브러리 선택 등]

    ### 남은 과제
    - [미완료 작업, 알려진 이슈]

    ### 관련 파일
    - [파일 경로 목록]
    ```
- [ ] 클립보드 복사 버튼 → Cursor 새 세션에 바로 붙여넣기
- [ ] (선택) .md 파일로 저장 → 프로젝트 디렉토리에 배치
- [ ] (향후) Cursor Notepads/Rules 형식으로 직접 주입

**산출물**: 과거 세션 → 컨텍스트 문서 → 새 세션에 이어가기 플로우 완성

---

## 전체 일정 (예상)

```
Phase 0  ██               (1~2일)  데이터 탐색
Phase 1  ██████           (3~5일)  세션 목록 + 검색
Phase 2  ██████           (3~5일)  요약 + 태깅
Phase 3  ██████           (3~5일)  시각화
Phase 4  ██████           (3~5일)  컨텍스트 이어가기
─────────────────────────────────────────
총 예상:  2~3주 (파트타임 기준 4~6주)
```

---

## 핵심 원칙

1. **로컬 퍼스트**: 모든 데이터는 로컬에서 처리. 서버 불필요. 프라이버시 보장.
2. **점진적 향상**: Phase 1만으로도 쓸 만한 도구. 이후 단계는 선택적.
3. **Cursor 데이터 활용 극대화**: 단순 채팅 텍스트뿐 아니라 파일 읽기/쓰기, 도구 사용 내역까지.
4. **비용 최소화**: LLM 요약은 세션 앞부분만 사용. 결과 캐싱. 로컬 모델 옵션.

---

## 확장 가능성 (MVP 이후)

- **시맨틱 검색**: 임베딩 기반으로 "비슷한 세션 찾기"
- **네트워크 그래프**: 연관 세션 시각화
- **파일 트리맵**: 가장 많이 다룬 파일 시각화
- **MCP 서버**: Cursor 내에서 직접 과거 맥락 검색 (cursor-chat-history-mcp 참고)
- **Claude/ChatGPT 지원**: conversations.json 파싱 추가
- **팀 기능**: 공유 컨텍스트, 온보딩 지원
